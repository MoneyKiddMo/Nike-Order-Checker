package main

import (
	"fmt"
	"os"
	"sync"
	"time"

	"github.com/fatih/color"
)

func main() {
	kissing := `
	    	,,(%%%%%%%%%%%%%%%%%%%%%%%%%%%%#/  .     .....,,,***////////****,,,........................,,***////
		%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#,..........,,,,**************,,,,,...............,,.,,,,,,,****
		%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*.......,,,,,****************,,,,,,....... ........,,,,,,***
		%%%%%%%%%%%%%%#%%%#%%%%%%%%%%%%%%%%%%%%%%%%* ......,,,,**************,,,,,............. ......,,,,**
		%%%%%%%%%%##%%#%%###%#%%#%%%##%%%%%%#####%%%%(........,,,,,,,,*********,,,,.,....................,,,
		%%%%%%%%######%####%#############%#%%##((#((((%/.  .. .......,,,*****/**,/#%%%%%%%%%%%%%%%%%%%%#(/,.
		%%%%%%##%%#%%%#####(####((###(#########(##(#(((#,...............,,,,*#%%%####%%%%%%%%%%%%%%%%%%%%%%&
		%%##%##%###%%%%#########((#(#(((((#####((((###(#(* ..       .....,#(((((((((((#%%%%%%%%%%%%%%%%%%%%%
		%%%##############(##(#((####(((((((####((((#######(............*((((((((((((##%%%#%%#%%%%%%%%%%%%%%%
		%%%#######################(((((((((#((#((((########*,....... (((((((((((((((#%######%##%%%%%%%%%%%%%
		#%%%%#############################((((###(#(#######(,,,....,#((###(##((((((((((###########%%%%%&%%#%
		%%%%%%############(############((((((((####((######(,,,,,,*#(((((((((((((((((((((##((#####%#%#%%%%%%
		%####%#########(##%%%########(((((((((((((((((((###(****,/##%%%#####(((((((((((((((((#((####%%%#%%%%
		############%#((((#%%%#%%#####((((((((((((((((#%%%&(****/#%%%%####(((/(/((((((((((((((((((######%%%%
		############%##((%%%%##########((((((((((########%/,*,,/%%%%%%####(((((/(((((((((((((((((((#######%%
		##########%%%###(##%%(((((#####(((((((((##%%%%#%#....,,(%%%%%%####%%%#((((((((((((((##((((((##%((#%(
		#####%#%##%%%%#%###%%#(#((######(((((((((####%%%#.......(###%%&&&%#(((((((((((###(((#(((((/((#(#(((#
		%%%#######%%%%%####(####((########((((((((((##%###/..*(#(((#####((((((((((((((###((#((((/(((#####((#
		#%%##%####%%%%%%%###%####(##########((((((((#########(((((##(((((((((((((((((##(((#((((((((#%#/(((((
		##(#%#######%%%%%%%%#############################((((%#(/(###(((((((((#((#((((((((#(((((((#(((((((##
		((((((#%%####%%%%%%%%############################(/(##%%#####(((((#######((#((((((((((((((#((((##%##
		%########%###%%%%%%%###########################%%%&%%%%###((#((((########((((((((((((((###%##%%#####
		#%%%#%#####%#%%#*#%%%#%%###########%##############%&%%%%%%#(((((##########((((#(((((####%%&&%#######
		(((%%#######%%%(//(%%%%%%%%%#%%%%%%%%%%%#########%%%%####%##((((((############(#(###########(((((###
		(((((########%%((/(#%%%%%%%%%%%%%%%%%#%%%%######%%%#(#####((((((((((########################(((((###
		(((((((#%#####(##//((#%&%%%%%%%%%%%%%%%%%%####%%%%%%%#%%######(((((((##################%#####(######
		(##(((((((((##((###((##%&%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&%%#####((((((#############%%%%%%%%###########
		(((##((##(((#########((#%&&&%%%%%%%%%%%%%%%%&%%%&%&%&&&%%#######((#(((#####%%%%%%%%%%%%%#######(####
		(((((((#####(#((##(((####&&&&&&%%%%%%%%%%%%%%# . **..*&%%%#############%%%%%%%%&&%%%%%%%############
		#((((((((#######(((((((###%&&&&&&%&%%%%%%%%%&..... ../&%%%%%%%###%%%%%%%&&&&&&&&%%%%%%%%############
		##########(((##((#(((((##%,,,,,*#%&&&&&&&&%&,,.....  (&&&&&&%%%%%%%&&&&&&&&&&&&%%%%%%%%#############
		############(###########%%,,,,,,,,*,,((((/,,,,,,......(&&&&&&&&&&&&&&&&&&&&%%%%%%%%%%%%#############
		########################%%........,,,,***,**,***,,,,,.../#/(#%%%%##(*,,,*%%%%%%%%%%%%%##############
		%%#############((########(  .........,,,,**********,,,,,,.......    .....,%%%%%%%%%#%%############/%
		####%#%#################%*...............,,,,,**********,,,,,............../%%%%%%%%%#%########(#%#/
		%#####%##%##############%,*,,,,......  ........,,,********,,,*,,,........... #%%%%%%%%%%%###(/%%#///
		%%######################%,*****,,,,...... ..............,,,,,*****,,,,,...... /%%%%%%%%%%#/#%%//////
		%&%%%######(##############,*************,,,,,...............,,,****,,***,,,,,./%%%%%%%#/(%%#/(////((
		%%%%&%%%###((##############,,,,,,,,***********,,,,,,....,......,,,,,,,*******#%#(#%%((%%#//(////////
		%%%%&&%%%%%##(((########(##%,......,,,,,************,,,,,,,........,,,,,,***#%%((/(%%#(((%/(/////((/
	`
	fmt.Println(kissing)
	color.HiCyan("\n\n						Nike Order Checker | Developed By jc2#9899")

	wg := sync.WaitGroup{}

	tasks, err := ReadCsv()
	if err != nil {
		color.Red("[ERR] Fatal Error Reading Tasks :%s, Closing Program.\n", err)
		time.Sleep(time.Second * 3)
		os.Exit(0)
	}

	Import()

	for _, task := range tasks {
		wg.Add(1)
		go exeCute(task, &wg)
	}
	wg.Wait()
}

func exeCute(Task Task, wg *sync.WaitGroup) {
	taskProxy, err := Get()
	if err != nil {
		color.Red("[ERR] Fatal Error Grabbing Proxies: %s, Closing Program.\n", err)
		time.Sleep(time.Second * 3)
		os.Exit(0)
	}
	Task.InitClient(taskProxy)
	body, err := Task.grabOrder()
	if err != nil {
		color.Red("[ERROR] exeCute.grabOrders ERROR GRABBING ORDER.\n")
	}
	if len(body.Group) > 0 {
		writeExport(*body)
	}
}
